{"version":3,"sources":["components/services/persons.js","components/App.js","index.js"],"names":["baseURL","axios","get","newInfo","post","id","delete","newObject","put","then","response","data","Filter","newSearch","handleFilter","value","onChange","PersonForm","updateInfo","handleNameChange","newName","handleNumberChange","newNumber","onSubmit","type","name","Persons","infoToShow","removePerson","persons","map","info","key","number","onClick","App","useState","setPersons","setNewName","setNewNumber","setNewSearch","undefined","foundPerson","setFoundPerson","responseMessage","setResponseMessage","nameOfClass","setnameOfClass","useEffect","personService","makeFirstCharactersUppercase","entry","split","s","charAt","toUpperCase","substr","join","hideNotification","setTimeout","filter","person","toLowerCase","includes","replace","className","e","typed","target","found","findIndex","preventDefault","foundName","foundNumber","concat","createNewEntry","window","confirm","console","log","updatedPerson","catch","error","updatePhoneNumber","alert","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.315750db.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nconst baseURL = 'http://localhost:3003/persons';\r\n\r\nconst getAll = () => {\r\n  return axios.get(baseURL)\r\n};\r\n\r\nconst create = (newInfo) => {\r\n  return axios.post(baseURL, newInfo)\r\n};\r\n\r\nconst remove = (id) => {\r\n  return axios.delete(`${baseURL}/${id}`)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseURL}/${id}`, newObject)\r\n  return request.then(response => response.data)\r\n}\r\n\r\nexport default {\r\n  getAll,\r\n  create,\r\n  remove,\r\n  update\r\n}","import React, { useState, useEffect } from 'react'\r\nimport personService from './services/persons'\r\nimport '../index.css'\r\n\r\nconst Filter = ({ newSearch, handleFilter }) => {\r\n  return (\r\n    <form>\r\n    filter shown with\r\n    <input\r\n    value={newSearch}\r\n    onChange={handleFilter}/>\r\n  </form>\r\n  )\r\n};\r\n\r\nconst PersonForm = ({ updateInfo, handleNameChange, newName, handleNumberChange, newNumber }) => {\r\n  return (\r\n    <div>\r\n      <form onSubmit={updateInfo}>\r\n      name: <input\r\n        onChange={handleNameChange}\r\n        value={newName}/>\r\n      </form>\r\n      <form onSubmit={updateInfo}>\r\n      number: <input\r\n        onChange={handleNumberChange}\r\n        value={newNumber}\r\n        type=\"text\"\r\n        name=\"option\"/>\r\n\r\n      <button type=\"submit\">add</button>\r\n      </form>\r\n    </div>\r\n  )\r\n};\r\n\r\nconst Persons = ({ infoToShow, persons, removePerson }) => {\r\n  return (\r\n    <div>\r\n    {infoToShow.map((info) => {\r\n      return <div key={info.id}>\r\n              <span>{info.name} {info.number} </span>\r\n              <button onClick={() => removePerson(info.id, info.name)} id={info.id}>delete</button>\r\n             </div>\r\n      })}\r\n</div>\r\n  )\r\n}\r\n\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons ] = useState([]);\r\n  const [ newName, setNewName ] = useState('');\r\n  const [ newNumber, setNewNumber ] = useState('');\r\n  const [ newSearch, setNewSearch] = useState('')\r\n  const [ foundPerson, setFoundPerson ] = useState(undefined);\r\n  const [responseMessage, setResponseMessage] = useState('');\r\n  const [ nameOfClass, setnameOfClass] = useState('');\r\n\r\n\r\n  useEffect(() => {\r\n    personService\r\n    .getAll()\r\n    .then(response => {\r\n    setPersons(response.data)\r\n  })\r\n  }, []);\r\n\r\n\r\n  const handleNameChange = (e) => {\r\n    setNewName(e.target.value);\r\n    \r\n  };\r\n\r\n\r\n  const makeFirstCharactersUppercase = (entry) => {\r\n    return entry\r\n      .split(' ')\r\n      .map(s => s.charAt(0)\r\n      .toUpperCase() + s\r\n      .substr(1))\r\n      .join(' ')\r\n  };\r\n\r\n\r\n  const hideNotification = () => {\r\n    return setTimeout(() => {\r\n            setResponseMessage('')\r\n            setnameOfClass('')\r\n          }, 5000)\r\n  };\r\n\r\n\r\n  const updatePhoneNumber = (id, updatedPerson, person) => {\r\n\r\n    return personService\r\n    .update(id, updatedPerson)\r\n    .then(response => {\r\n      setPersons(persons.map(person => person.id === id ? response.data : person));\r\n\r\n    setnameOfClass('response')\r\n    setResponseMessage(`${person.name}'s number changed!`)\r\n    hideNotification();\r\n    setNewName('')\r\n    setNewNumber('')\r\n    })\r\n    .catch(error => {\r\n\r\n      setnameOfClass('error')\r\n      setResponseMessage(`${person.name} has been deleted!`)\r\n      hideNotification();\r\n      \r\n    })\r\n  };\r\n\r\n\r\n  const createNewEntry = (newInfo) => {\r\n    return personService\r\n            .create(newInfo)\r\n            .then(response => {\r\n              setPersons(persons.concat(response.data))\r\n              setnameOfClass('response')\r\n              setResponseMessage(`${response.data.name} added`)\r\n              hideNotification();\r\n              setNewName('')\r\n              setNewNumber('')\r\n            })\r\n  };\r\n\r\n\r\n  const updateInfo = (e) => {\r\n    e.preventDefault();\r\n\r\n    const foundName = persons.findIndex(person => person.name === makeFirstCharactersUppercase(newName));\r\n\r\n    const foundNumber = persons.findIndex(person => person.number === newNumber);\r\n\r\n    if( foundName === -1 && foundNumber === -1 && newNumber){\r\n\r\n      const newInfo = {\r\n        name: makeFirstCharactersUppercase(newName).replace(/ {2,}/g, ' '),\r\n        number: newNumber\r\n        };\r\n\r\n      createNewEntry(newInfo);\r\n\r\n\r\n    } else if (foundName > -1 && persons[foundName].number !== newNumber) {\r\n\r\n      if (window.confirm(newNumber && `${persons[foundName].name} is already added to phonebook, replace the old number with a new one?`)) {\r\n        console.log(persons[foundName].name)\r\n        const person = persons[foundName];\r\n        const id = persons[foundName].id;\r\n        const updatedPerson = {\r\n          ...person, number: newNumber\r\n        }\r\n\r\n        updatePhoneNumber(id, updatedPerson, person);\r\n\r\n      } else {\r\n        setNewName('')\r\n        setNewNumber('')\r\n      }\r\n      \r\n    } else if (newName && !newNumber ) {\r\n      alert('Add new number')\r\n      setNewName('')\r\n\r\n    } else if ( foundName && foundNumber ) {\r\n      alert(`${newName} is already added to phonebook`)\r\n      setNewName('')\r\n      setNewNumber('')\r\n    }; \r\n  };\r\n\r\n\r\n  const handleNumberChange = (e) => {\r\n    const typed = e.target.value;\r\n    setNewNumber(typed)\r\n  };\r\n\r\n\r\n  const handleFilter = (e) => {\r\n    const typed = e.target.value;\r\n    setNewSearch(typed)\r\n\r\n    const found = \r\n    persons.findIndex(person => person.name.toLowerCase().includes(newSearch.toLowerCase().replace(/ {2,}/g, ' ')));\r\n\r\n\r\n    const result = found !== -1;\r\n    setFoundPerson(result)\r\n\r\n  };\r\n\r\n\r\n  const infoToShow = foundPerson ? persons.filter(person => person.name.toLowerCase().includes(newSearch.toLowerCase().replace(/ {2,}/g, ' ')) ) : persons;\r\n\r\n\r\n  const removePerson = (id, name) => {\r\n    if (window.confirm(`Delete ${name}?`)) {\r\n      personService\r\n      .remove(id)\r\n      .then(response => {\r\n        setPersons(persons.filter(person => person.id !== id))\r\n      })\r\n    } else {\r\n      return;\r\n    }\r\n\r\n  }\r\n\r\n\r\n  return (\r\n    <div>\r\n\r\n      <div className={nameOfClass}>{responseMessage}</div>\r\n\r\n      <h1>Phonebook</h1>\r\n\r\n      <Filter newSearch={newSearch} handleFilter={handleFilter}/>\r\n\r\n      <h3>add a new</h3>\r\n\r\n      <PersonForm updateInfo={updateInfo} handleNameChange={handleNameChange} handleNumberChange={handleNumberChange} newName={newName} newNumber={newNumber}/>\r\n\r\n      <h3>Numbers</h3>\r\n\r\n      <Persons removePerson={removePerson} infoToShow={infoToShow} persons={persons}/>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './components/App'\n\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}